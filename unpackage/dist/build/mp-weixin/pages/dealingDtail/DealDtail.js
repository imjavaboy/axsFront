(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/dealingDtail/DealDtail"],{"4f28":function(t,n,e){},"59f9":function(t,n,e){"use strict";var o=e("4f28"),i=e.n(o);i.a},"8f68":function(t,n,e){"use strict";e.r(n);var o=e("e7b1"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=i.a},a102:function(t,n,e){"use strict";e.r(n);var o=e("bcba"),i=e("8f68");for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);e("59f9");var c,s=e("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"6b3c5a5f",null,!1,o["a"],c);n["default"]=r.exports},bcba:function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}));var i=function(){var t=this,n=t.$createElement;t._self._c},a=[]},e7b1:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("36b0")),i=e("5084"),a=e("5084");function c(t){return t&&t.__esModule?t:{default:t}}var s={name:"DealDetail",props:{},data:function(){return{item:{},dealId:0,dealingImgArr:[],userimg:"",nickname:"",isCollected:!1,isInCart:!1,loginUserInfo:null}},methods:{onLoad:function(n){var e=this;this.dealId=n.id,this.loginUserInfo=t.getStorageSync("userInfo");var o=t.getStorageSync("id");""!==this.loginUserInfo&&((0,i.isCollect)(o,this.dealId).then((function(t){e.isCollected=t.obj.isCollect})),(0,a.isInCart)(o,this.dealId).then((function(t){e.isInCart=t.obj.isInCart})))},onShow:function(n){var e=this;this.userInfo=t.getStorageSync("userInfo"),(0,i.getDealingDetail)(this.dealId).then((function(t){console.log("物品详情",t.obj),e.item=t.obj,e.dealingImgArr=t.obj.photo.split("`")})).catch((function(n){t.showToast({title:"获取物品详情失败",icon:"error"})}))},showLoginTip:function(){t.showToast({title:"请先登录",icon:"error"})},contact:function(){t.navigateTo({url:"/pages/chatDetail/ChatDeatil?sendto=".concat(this.item.uid,"&username=").concat(this.item.username)})},enterShop:function(n){t.navigateTo({url:"/pages/shop/Shop?uid=".concat(n.currentTarget.dataset.shop)})},doCollect:function(){var n=this,e=this.dealId,o=t.getStorageSync("id");(0,i.collectDeal)({uid:o,dealingId:e}).then((function(e){console.log("收藏结果",e),200===e.code&&(t.showToast({title:"收藏成功",icon:"success"}),n.isCollected=!0)})).catch((function(n){t.showToast({title:"收藏失败",icon:"error"})}))},dontCollect:function(){var n=this,e=this.dealId,o=t.getStorageSync("id");(0,i.noCollect)({uid:o,dealingId:e}).then((function(e){200===e.code&&(t.showToast({title:"取消收藏成功",icon:"success"}),n.isCollected=!1)})).catch((function(n){t.showToast({title:"取消收藏失败",icon:"error"})}))},onCartButton:function(){var n=this;(0,a.inCart)({uid:t.getStorageSync("id"),dealingId:this.dealId}).then((function(e){200===e.code?(t.showToast({title:"加入购物车成功",icon:"success"}),n.isInCart=!0):t.showToast({title:"加入购物车失败",icon:"success"})}))},onBuyButton:function(){var n=this.loginUserInfo.id,e=this.dealId,a=0,c=this.item.uid,s=this.item.itemName,r={uid:n,dealingId:e,status:a,havUserId:c,itemName:s};console.log("购买信息",r),(0,i.insertBuying)(r).then((function(t){console.log(t),200===t.code&&o.default.alert({title:"购买成功",message:"请联系发布者请求线下交易"}).then((function(){}))})).catch((function(n){t.showToast({title:"购买失败",icon:"error"})}))},onCartOffButton:function(){var n=this;console.log("移除购物车"),(0,i.outCart)(t.getStorageSync("id"),this.dealId).then((function(e){200===e.code?(t.showToast({title:"移除成功",icon:"success"}),n.isInCart=!1):t.showToast({title:"移除失败",icon:"error"})}))}}};n.default=s}).call(this,e("543d")["default"])},f4bb:function(t,n,e){"use strict";(function(t){e("085c");o(e("66fd"));var n=o(e("a102"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["f4bb","common/runtime","common/vendor"]]]);