(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-forumDetail-ForumDetail"],{"0904":function(t,e,i){"use strict";var n=i("2fc7"),a=i.n(n);a.a},"12e0":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("v-uni-view",{staticClass:"item-container"},[i("v-uni-view",{staticClass:"item-top"},[i("span",{staticClass:"top-avater"},[i("img",{attrs:{src:t.item.headimg,alt:""}})]),i("span",{staticClass:"item-time"},[i("v-uni-view",{staticClass:"username"},[t._v(t._s(t.item.username))]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.item.time))])],1)]),i("v-uni-view",{staticClass:"item-content"},[i("v-uni-view",{staticClass:"content-text"},[t._v(t._s(t.item.content))]),""!==t.item.photo&&void 0!==t.item.photo?i("v-uni-view",{staticClass:"item-photo"},t._l(t.item.photo.split("`"),(function(e,n){return i("v-uni-view",{key:e},[i("v-uni-image",{attrs:{src:e,mode:"aspectFill","data-imgindx":n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickImg.apply(void 0,arguments)}}})],1)})),1):t._e(),""!==t.item.tags?i("v-uni-view",{staticClass:"tag-block"},t._l(t.item.tags,(function(e){return i("span",{key:e},[i("van-tag",{attrs:{plain:!0,color:"SkyBlue"}},[t._v(t._s(e.tagName))])],1)})),0):t._e()],1),i("v-uni-view",{staticClass:"item-icon"},["1"===t.isMeLike?i("van-icon",{attrs:{name:"thumb-circle-o",color:"red",size:"50rpx","data-pid":t.item.id,info:t.item.likesNum>0?t.item.likesNum:null},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.dontLike.apply(void 0,arguments)}}}):t._e(),"0"===t.isMeLike?i("van-icon",{attrs:{name:"thumb-circle-o",size:"50rpx","data-pid":t.item.id,info:t.item.likesNum>0?t.item.likesNum:null},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.doLike.apply(void 0,arguments)}}}):t._e(),i("van-icon",{attrs:{name:"comment-o",size:"50rpx",info:t.item.commentNum>0?t.item.commentNum:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isCommentPopupShow=!0}}})],1)],1),t.item.comments.length>0?i("v-uni-view",{staticClass:"comment-box"},t._l(t.item.comments,(function(e){return i("v-uni-view",{key:e.id,staticClass:"com-item"},[i("v-uni-view",{staticClass:"com-left"},[i("v-uni-view",{staticClass:"com-avater"},[i("img",{attrs:{src:e.account.headimg,alt:""}})]),i("v-uni-view",{staticClass:"com-mid"},[i("v-uni-view",{staticClass:"com-name"},[t._v(t._s(e.account.username))]),i("v-uni-view",{staticClass:"com-context"},[t._v(t._s(e.context))])],1)],1),i("v-uni-view",{staticClass:"com-time"},[t._v(t._s(e.time))])],1)})),1):i("v-uni-view",{staticClass:"none-comment"},[t._v("暂无评论")]),i("van-popup",{attrs:{show:t.isCommentPopupShow,position:"bottom","custom-style":"height: 230rpx;",closeable:!0},on:{"after-leave":function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)},"click-overlay":function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup-container"},[i("v-uni-textarea",{staticClass:"comment-textarea",attrs:{"auto-focus":!0,placeholder:"...",value:t.textValue,"placeholder-class":"textarea-placeholder"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTextAreaBlur.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTextAreaBlur.apply(void 0,arguments)}}}),i("v-uni-button",{staticClass:"send-comment-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendComment.apply(void 0,arguments)}}},[t._v("发布")])],1)],1)],1)},o=[]},"1ab1":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.box[data-v-242d2020]{width:100%;height:100vh;background:#ddd}.item-container[data-v-242d2020]{width:96%;\r\n  /*height:30vh;*/margin:%?0?% auto;background:#fff;border-radius:%?20?%;overflow:hidden;padding:%?20?% 0}.item-container .item-top[data-v-242d2020]{\r\n  /*background: #4cd964;*/display:flex;align-items:center}.item-container .item-top .top-avater[data-v-242d2020]{display:inline-block;width:%?60?%;height:%?60?%;background:#333;border-radius:%?50?%;margin:0 %?20?%;overflow:hidden}.item-container .item-top .top-avater img[data-v-242d2020]{width:100%;height:100%}.item-container .item-top .item-time[data-v-242d2020]{color:#ccc;font-size:%?26?%}.item-container .item-top .item-time .username[data-v-242d2020]{color:#000}.item-container .item-content .content-text[data-v-242d2020]{margin-top:%?10?%;margin-left:%?20?%}.item-container .item-content .item-photo[data-v-242d2020]{height:%?160?%;margin-left:%?30?%;margin-top:%?10?%}.item-container .item-content .item-photo uni-view[data-v-242d2020]{height:100%;border-radius:%?20?%;display:inline-block;margin:0 %?20?%}.item-container .item-content .item-photo uni-view uni-image[data-v-242d2020]{width:%?200?%;height:100%}.item-container .item-content .tag-block[data-v-242d2020]{padding:%?5?% %?20?%}.item-container .item-content .tag-block .tag-block[data-v-242d2020]{display:inline-block;margin:0 %?30?%}.item-container .item-icon[data-v-242d2020]{display:flex;justify-content:space-around;align-items:center;margin-top:%?20?%}.item-container .item-icon van-icon[data-v-242d2020]{margin:%?10?% %?50?%}.comment-box[data-v-242d2020]{background:#fff;width:90%;padding:%?20?%;border-radius:%?20?%;margin:%?30?% auto 0 auto\r\n  /*background: #4cd964;*/}.comment-box .com-item[data-v-242d2020]{display:flex;justify-content:space-between;margin-bottom:%?20?%}.comment-box .com-item .com-left[data-v-242d2020]{display:flex;justify-content:left;align-items:center}.comment-box .com-item .com-left .com-avater[data-v-242d2020]{width:%?100?%;height:%?100?%;border-radius:%?50?%;overflow:hidden;margin-right:%?20?%}.comment-box .com-item .com-left .com-avater img[data-v-242d2020]{width:100%;height:100%}.comment-box .com-item .com-left .com-mid .com-name[data-v-242d2020]{color:#aaa;font-size:%?28?%}.comment-box .com-item .com-left .com-mid .content-text[data-v-242d2020]{margin-top:%?10?%}.comment-box .com-item .com-time[data-v-242d2020]{color:#aaa}.none-comment[data-v-242d2020]{height:%?30?%;background:#fff;display:flex;justify-content:center;align-items:center;font-size:%?30?%;padding:%?30?%;color:#bbb;width:90%;border-radius:%?20?%;margin:%?30?% auto 0 auto}.popup-container[data-v-242d2020]{margin:%?20?% %?30?%;display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between}.comment-textarea[data-v-242d2020]{border:none;background-color:#f4f4f4;border-radius:%?40?%;padding:%?23?%;width:80%;height:%?150?%;font-size:%?28?%;color:#323232}.textarea-placeholder[data-v-242d2020]{font-size:%?28?%;color:#323232}.popup-container uni-button[data-v-242d2020]::after{border:none}.popup-container uni-button[data-v-242d2020]{background-color:#fff;color:#f18230;width:20%;font-size:%?30?%;margin-left:0;margin-right:0;padding:0;margin-top:auto;margin-bottom:%?-20?%;padding-left:%?65?%}',""]),t.exports=e},"2a10":function(t,e,i){"use strict";i.r(e);var n=i("aae9"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"2fc7":function(t,e,i){var n=i("1ab1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("ed1752fc",n,!0,{sourceMap:!1,shadowMode:!1})},aae9:function(t,e,i){"use strict";var n=i("4ea4");i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("ade3")),o=i("5084"),c={name:"ForumDetail",data:function(){return{pid:"",item:{},isCommentPopupShow:!1,textValue:"",isMeLike:0}},methods:(0,a.default)({closePopup:function(){this.isCommentPopupShow=!1,this.textValue=""},onLoad:function(t){this.pid=t.pid,this.isMeLike=t.isMeLike,this.getData()},getData:function(){var t=this;(0,o.getDetailPostingById)(this.pid).then((function(e){t.item=e.obj})).catch((function(t){uni.showToast({title:"获取帖子详情失败",icon:"error"})}))},clickImg:function(t){var e=t.currentTarget.dataset.imgindex;wx.previewImage({urls:this.item.photo.split("`"),current:this.item.photo.split("`")[e]})},bindTextAreaBlur:function(t){this.textValue=t.detail.value},sendComment:function(){},dontLike:function(t){var e=this,i=uni.getStorageSync("id");(0,o.dontLike)(i,this.pid).then((function(t){200===t.code&&(e.$set(e.item,"likesNum",e.item.likesNum-1),e.isMeLike="0"),uni.showToast({title:t.message,icon:"success"})}))},doLike:function(t){var e=this,i=uni.getStorageSync("id");(0,o.doLike)(i,this.pid).then((function(t){200===t.code&&(e.$set(e.item,"likesNum",e.item.likesNum+1),e.isMeLike="1"),uni.showToast({title:t.message,icon:"success"})}))}},"sendComment",(function(t){var e=this;if(""!==this.textValue){var i=uni.getStorageSync("id");(0,o.remarkPosting)(i,this.pid,this.textValue).then((function(t){200===t.code?(uni.showToast({title:"评论成功",icon:"success"}),e.getData()):uni.showToast({title:"评论失败",icon:"error"})})).catch((function(t){uni.showToast({title:"评论失败",icon:"error"})})),this.textValue="",this.isCommentPopupShow=!1}else uni.showToast({title:"评论不能为空",icon:"error"})}))};e.default=c},c5d8:function(t,e,i){"use strict";i.r(e);var n=i("12e0"),a=i("2a10");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("0904");var c,s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"242d2020",null,!1,n["a"],c);e["default"]=r.exports}}]);