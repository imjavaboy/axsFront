(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatDetail-ChatDeatil"],{"0cfe":function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var o=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("v-uni-view",[n("v-uni-scroll-view",{staticStyle:{height:"100vh"},attrs:{"scroll-y":!0,"scroll-into-view":"toView"}},[t._l(t.msgList,(function(i,o){return n("v-uni-view",{key:i.id},[i.isTo?n("v-uni-view",{staticStyle:{display:"flex",padding:"2vw 11vw 2vw 2vw"},attrs:{id:"msg-"+o}},[n("v-uni-view",{staticStyle:{width:"11vw",height:"11vw"}},[0===i.buyUserId?n("v-uni-image",{staticStyle:{width:"11vw",height:"11vw","border-radius":"10rpx"},attrs:{src:e("beb1")}}):n("v-uni-image",{staticStyle:{width:"11vw",height:"11vw","border-radius":"10rpx"},attrs:{src:i.buyHeadImg}})],1),n("v-uni-view",{staticClass:"leftMsg"},[n("v-uni-text",{staticClass:"msg-text"},[t._v(t._s(i.content))])],1)],1):n("v-uni-view",{staticStyle:{display:"flex","justify-content":"flex-end",padding:"2vw 2vw 2vw 11vw"},attrs:{id:"msg-"+o}},[n("v-uni-view",{staticClass:"rightMsg"},[n("v-uni-text",{staticClass:"msg-text"},[t._v(t._s(i.content))])],1),n("v-uni-view",{staticStyle:{width:"11vw",height:"11vw"}},[n("v-uni-image",{staticStyle:{width:"11vw",height:"11vw","border-radius":"10rpx"},attrs:{src:i.buyHeadImg}})],1)],1)],1)})),n("v-uni-view",{staticStyle:{width:"100%",height:"18vw"}})],2),0!==t.item.buyUserId?n("v-uni-form",{on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.sendClick.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"inputRoom",style:"bottom:"+t.inputBottom},[n("v-uni-input",{attrs:{name:"content","adjust-position":"false",value:t.inputVal},on:{focus:function(i){arguments[0]=i=t.$handleEvent(i),t.focus.apply(void 0,arguments)},blur:function(i){arguments[0]=i=t.$handleEvent(i),t.blur.apply(void 0,arguments)}}}),n("v-uni-button",{staticStyle:{width:"120rpx",height:"60rpx","margin-left":"20rpx","margin-right":"10rpx","background-color":"#07C160",color:"white","font-size":"24rpx"},attrs:{"form-type":"submit"}},[t._v("发送")])],1)],1):t._e()],1),n("van-dialog",{attrs:{id:"van-dialog"}})],1)},s=[]},"295f":function(t,i,e){var n=e("4fc6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("46f5b8d1",n,!0,{sourceMap:!1,shadowMode:!1})},"310d":function(t,i,e){"use strict";e.r(i);var n=e("0cfe"),o=e("d9d6");for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("e086");var a,r=e("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"ae90772a",null,!1,n["a"],a);i["default"]=c.exports},"36b0":function(t,i,e){"use strict";(function(t){e("4160"),e("d3b7"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=[],o={show:!1,title:"",width:null,theme:"default",message:"",zIndex:100,overlay:!0,selector:"#van-dialog",className:"",asyncClose:!1,beforeClose:null,transition:"scale",customStyle:"",messageAlign:"",overlayStyle:"",confirmButtonText:"确认",cancelButtonText:"取消",showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,confirmButtonOpenType:""},s=Object.assign({},o);function a(){var t=getCurrentPages();return t[t.length-1]}var r=function(i){return i=Object.assign(Object.assign({},s),i),new Promise((function(e,o){var s=i.context||a(),r=s.selectComponent(i.selector);delete i.context,delete i.selector,r?(r.setData(Object.assign({callback:function(t,i){"confirm"===t?e(i):o(i)}},i)),t((function(){r.setData({show:!0})})),n.push(r)):console.warn("未找到 van-dialog 节点，请确认 selector 及 context 是否正确")}))};r.alert=function(t){return r(t)},r.confirm=function(t){return r(Object.assign({showCancelButton:!0},t))},r.close=function(){n.forEach((function(t){t.close()})),n=[]},r.stopLoading=function(){n.forEach((function(t){t.stopLoading()}))},r.currentOptions=s,r.defaultOptions=o,r.setDefaultOptions=function(t){s=Object.assign(Object.assign({},s),t),r.currentOptions=s},r.resetDefaultOptions=function(){s=Object.assign({},o),r.currentOptions=s},r.resetDefaultOptions();var c=r;i.default=c}).call(this,e("fe07")["nextTick"])},"41a3":function(t,i,e){"use strict";var n=e("4ea4");e("4160"),e("e25e"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("ade3")),s=e("5084"),a=n(e("36b0")),r={name:"ChatDetail",data:function(){return{to:0,from:0,msgList:[],myPhoto:"",inputVal:"",windowWidth:0,windowHeight:0,keyHeight:0,scrollHeight:"100vh",inputBottom:0,toView:""}},methods:{onLoad:function(t){this.windowWidth=wx.getSystemInfoSync().windowWidth,this.windowHeight=wx.getSystemInfoSync().windowHeight,this.to=t.sendto,this.from=uni.getStorageSync("id"),uni.setNavigationBarTitle({title:t.username}),this.myPhoto=uni.getStorageSync("userInfo").headimg,this.getData()},getData:function(){var t=this;(0,s.getChatListSomeOne)(this.from,this.to).then((function(i){i.obj.forEach((function(i){i.buyUserId!==parseInt(t.from)?i.isTo=!0:i.isTo=!1})),t.msgList=i.obj}))},focus:function(t){console.log(t.detail),this.keyHeight=t.detail.height,this.scrollHeight=this.windowHeight-this.keyHeight+"px",this.toView="msg-"+(this.msgList.length-1),this.inputBottom=this.keyHeight+"px",this.inputVal=t.detail.value},blur:function(t){console.log(t.detail),this.scrollHeight="100vh",this.inputBottom=0,this.toView="msg-"+(this.msgList.length-1),this.inputVal=t.detail.value},sendClick:function(){var t=this;console.log("消息",this.inputVal),""===this.inputVal&&a.default.alert({title:"请输入消息"}).then((function(){})),(0,s.insertMsg)((0,o.default)({who:1,content:this.inputVal,buyUserId:this.from,havUserId:this.to},"who",this.from)).then((function(i){200===i.code?t.getData():uni.showToast({title:"消息发送失败",icon:"error"})})).catch((function(t){uni.showToast({title:"消息发送失败",icon:"error"})})),this.inputVal=""}}};i.default=r},"4fc6":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.inputRoom[data-v-ae90772a]{width:100vw;height:16vw;border-top:1px solid #cdcdcd;background-color:#f1f1f1;position:fixed;bottom:0;display:flex;align-items:center;z-index:20}uni-input[data-v-ae90772a]{width:%?600?%;height:%?70?%;background-color:#fff;border-radius:%?5?%;margin-left:2vw;padding:0 3vw;font-size:%?28?%;color:#444}.leftMsg[data-v-ae90772a]{font-size:%?35?%;color:#444;\r\n  /* line-height: 7vw; */padding:%?15?% %?25?%;background-color:#000;color:#fff;margin-left:%?10?%;border-radius:%?10?%;z-index:10;margin-right:%?28?%}.rightMsg[data-v-ae90772a]{font-size:%?35?%;color:#444;\r\n  /* line-height: 7vw; */padding:%?15?% %?25?%;background-color:#96eb6a;margin-left:%?27?%;margin-right:%?10?%;border-radius:%?10?%;z-index:10}.msg-text[data-v-ae90772a]{font-size:%?30?%}',""]),t.exports=i},beb1:function(t,i,e){t.exports=e.p+"static/img/sys.e9052556.png"},d9d6:function(t,i,e){"use strict";e.r(i);var n=e("41a3"),o=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},e086:function(t,i,e){"use strict";var n=e("295f"),o=e.n(n);o.a}}]);